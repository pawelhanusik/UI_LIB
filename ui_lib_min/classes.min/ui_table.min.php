<?php namespace UI; ?>
<style>.ui_table, .ui_table_control {border-collapse: collapse;	border: 2px solid #888;}.ui_table {	margin: auto;	width: 100%;	}.ui_table_control {	margin: auto 0 auto auto;	border-bottom: none;}.ui_table td, .ui_table th {	border: 1px solid #aaa;	text-align: center;	padding: 8px 12px;}.ui_table_control td, .ui_table_control th {	padding: 6px;}.ui_table tr:nth-child(even) {	background-color: #ddd;}.ui_table .colFitContents {	width: 1%;	white-space: nowrap;}.ui_table th a {  cursor: pointer;}.ui_table input{	width: 100%;}.ui_table_control input {	text-align: center;}</style>
<script>class UI_Table{constructor(t,e="ui_table",s="ui_table_control"){this.id=t,this.className=e,this.cnc=s,this.header=[],this.data=[],this.sao=10,this.spn=0,this.soc=0,this.soa=1,this.fil=[]}dit(t=this.id){let e=document.getElementById(t),s=document.createElement("table");s.id=this.id,s.className=this.className;let a=document.createElement("table");a.id="",a.className=this.cnc;let i=document.createElement("tr");i.innerHTML='<td><button onclick="'+this.id+'.prev_page();">&lt;</button></td><td><input type="text" value="'+(this.spn+1)+'" size="'+Math.max(Math.ceil(Math.log10(this.data.length/this.sao))-1,1)+'" onkeyup="if(!isNaN(parseInt(this.value-1)))'+this.id+'.change_page(parseInt(this.value-1));"></td><td><a> / </a></td><td><a>'+Math.ceil(this.data.length/this.sao)+'</a></td><td><button onclick="'+this.id+'.next_page();">&gt;</button></td>',a.appendChild(i),e.appendChild(a),e.appendChild(s),s.appendChild(document.createElement("tr"));for(let t=0;t<this.header.length;++t){let e="";e+='<a onclick="'+s.id+".sort("+t+').updateTable()">',e+=this.header[t],this.soc===t&&(e+=1===this.soa?" &#x25BD;":" &#x25B3;"),e+="</a>";let a=document.createElement("th");a.innerHTML=e,s.rows[0].appendChild(a)}for(let t=0;t<Math.min(this.data.length,this.sao);++t){s.appendChild(document.createElement("tr"));for(let e=0;e<this.data[t].length;++e){let a=document.createElement("td");a.innerHTML=this.data[t][e],s.rows[t+1].appendChild(a)}}}next_page(){this.change_page(this.spn+1)}prev_page(){this.change_page(this.spn-1)}change_page(t){t>=0&&t<Math.ceil(this.data.length/this.sao)&&(this.spn=t,this.updateTable())}get_filter(t){return null==this.fil[t]?"":this.fil[t]}sort(t){this.soc===t?this.soa*=-1:(this.soc=t,this.soa=1);let e=this.soa;return this.data.sort(function(s,a){let i=parseInt(s[t]),l=parseInt(a[t]);return(isNaN(i)||isNaN(l))&&(i=s[t],l=a[t]),i>l?1*e:i<l?-1*e:0}),this}filter(){let t=document.getElementById(this.id).getElementsByTagName("table")[1];for(let e=1;e<t.rows.length;++e){let s=!0;for(let a=0;a<this.fil.length;++a)if(void 0!==this.fil[a]&&(console.log(e),-1===t.rows[e].cells[a].innerHTML.indexOf(this.fil[a]))){s=!1;break}t.rows[e].style.display=s?"":"none"}}setFilter(t,e){this.fil[t]=""==e?void 0:e}updateTable(){document.getElementById(this.id).getElementsByTagName("table")[0].getElementsByTagName("input")[0].value=this.spn+1;let t=document.getElementById(this.id).getElementsByTagName("table")[1];for(t.className=this.className;this.header.length-t.rows[0].cells.length>0;)t.rows[0].appendChild(document.createElement("th"));for(;this.header.length-t.rows[0].cells.length<0;)t.rows[0].cells[0].remove();for(let e=0;e<this.header.length;++e){let s="";s+='<a onclick="'+t.id+".sort("+e+').updateTable()">',s+=this.header[e],this.soc===e&&(s+=1===this.soa?" &#x25BD;":" &#x25B3;"),s+="</a>",t.rows[0].cells[e].innerHTML=s}for(;this.data.length-t.rows.length+1>0;)t.appendChild(document.createElement("tr"));for(;this.data.length-t.rows.length+1<0;)t.rows[1].remove();let e=this.spn*this.sao;for(let s=e;s<Math.min(this.data.length,e+this.sao);++s){for(;this.data[s].length-t.rows[s+1-e].cells.length>0;)t.rows[s+1-e].appendChild(document.createElement("td"));for(;this.data[s].length-t.rows[s+1-e].cells.length<0;)t.rows[s+1-e].cells[0].remove();for(let a=0;a<this.data[s].length;++a)t.rows[s+1-e].cells[a].innerHTML=this.data[s][a]}this.filter()}}</script>
<?php class Table{private $table_id;private $className='ui_table classic';public $head=array();public $data=array();private $sao=100;public function __construct(){static $tmp_table_id=0;++$tmp_table_id;$this->table_id='ui_table_'.$tmp_table_id;}public function show($amount){$this->sao=$amount;}public function draw(){ ?><div id="<?php echo $this->table_id; ?>"></div><script>var <?php echo $this->table_id; ?> = new UI_Table("<?php echo $this->table_id; ?>","<?php echo $this->className; ?>");<?php echo $this->table_id; ?>.sao = <?php echo $this->sao; ?>;<?php echo $this->table_id; ?>.header=[<?php if(is_array($this->head)){for($i=0;$i<count($this->head);++$i){if($i>0) echo ',';echo '"'.$this->head[$i].'"';}} ?>];<?php echo $this->table_id; ?>.data=[<?php if(is_array($this->data)){for($i=0;$i<count($this->data);++$i){$dataRow=$this->data[$i];if($i>0)echo ',';echo '[';if(is_array($dataRow)){for($j=0;$j<count($dataRow);++$j){if($j>0)echo ',';echo '"'.$dataRow[$j].'"';}}echo ']';}} ?>];<?php echo $this->table_id; ?>.dit();</script><?php }public function setHeader($header){$this->head=$header;}public function addRow($row){$this->data[]=$row;}} ?>